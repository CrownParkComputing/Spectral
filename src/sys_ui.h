// @todo: checkbox (underline on when !hover)
// @todo: radio a b (underline on selected)

/* generated by ttf2mono.cc v0.2;                         https://github.com/r-lyeh
    bescii.ttf specimen:
 
    !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`abcdefghijklmnop
    qrstuvwxyz{|}~ ¡¢£¤¥¦§¨©ª«¬­®¯°±²³´µ¶·¸¹º»¼½¾¿ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏÐÑÒÓÔÕÖ×ØÙÚÛÜÝÞßàá
    âãäåæçèéêëìíîïðñòóôõö÷øùúûüýþÿıŁłŒœŠšŸŽžƒˆˇ˘˙˚˛˜˝ΔΣΩαβγδεθλμπσφχψωẞ–—‘’‚“”„†‡•…‰
    ‹›⁄€™←↑→↓↔↕↖↗↘↙∂∏∑−√∞∫≈≠≤≥⊣⎾⏊⏌─│┌┐└┘├┤┬┴┼╭╮╯╰╱╲╳╴╵╶╷▀▁▂▃▄█▌▍▎▏▐▒▔▕▖▗▘▙▚▛▜▝▞▟■□◊○
    ◌●◢◣◤◥☹☺☼♀♂♠♣♥♦♩♪♫♬♭♮♯✓⭠⭡⭢⭣ぁあぃいぅうぇえぉおかがきぎくぐけげこごさざしじすずせぜそぞただちぢっつづてでとどなにぬねのはばぱひびぴふ
    ぶぷへべぺほぼぽまみむめもゃやゅゆょよらりるれろゎわゐゑをんゔ゙゚ゝゞァアィイゥウェエォオカガキギクグケゲコゴサザシジスズセゼソゾタダチヂッツヅテデトドナニヌネ
    ノハバパヒビピフブプヘベペホボポマミムメモャヤュユョヨラリルレロヮワヰヱヲンヴヵヶヷヸヹヺ・ーヽ
    
    
    
    ﬁﬂ
*/

const uint64_t bescii_bit[][2] = {
{0x0020,0x0000000000000000},{0x0021,0x1818181818001800},{0x0022,0x3636240000000000},{0x0023,0x6c6cfe6cfe6c6c00},
{0x0024,0x107cd07c167c1000},{0x0025,0x00666c1830664600},{0x0026,0x386c3876dccc7600},{0x0027,0x1818100000000000},
{0x0028,0x0c18303030180c00},{0x0029,0x30180c0c0c183000},{0x002a,0x00663cff3c660000},{0x002b,0x000018187e181800},
{0x002c,0x0000000000181830},{0x002d,0x000000003c000000},{0x002e,0x0000000000001800},{0x002f,0x02060c1830604000},
{0x0030,0x3c666e7666663c00},{0x0031,0x1838181818181800},{0x0032,0x3c66063c60667e00},{0x0033,0x3c66061c06663c00},
{0x0034,0x1c3c6cccfe0c0c00},{0x0035,0x7e66607c06663c00},{0x0036,0x3c66607c66663c00},{0x0037,0x7e66060c18181800},
{0x0038,0x3c66663c66663c00},{0x0039,0x3c66663e06663c00},{0x003a,0x0000001800180000},{0x003b,0x0000001800181830},
{0x003c,0x00000c1830180c00},{0x003d,0x0000007c007c0000},{0x003e,0x000030180c183000},{0x003f,0x3c66060c18001800},
{0x0040,0x7cc6ded6dcc07c00},{0x0041,0x183c66667e666600},{0x0042,0x7c66667c66667c00},{0x0043,0x3c66606060663c00},
{0x0044,0x7c66666666667c00},{0x0045,0x7e60607860607e00},{0x0046,0x7e60607860606000},{0x0047,0x3c66606e66663c00},
{0x0048,0x6666667e66666600},{0x0049,0x3c18181818183c00},{0x004a,0x0e06060606663c00},{0x004b,0x66666c786c666600},
{0x004c,0x6060606060607e00},{0x004d,0xc6eefed6c6c6c600},{0x004e,0x66767e6e66666600},{0x004f,0x3c66666666663c00},
{0x0050,0x7c66667c60606000},{0x0051,0x3c666666666e3c06},{0x0052,0x7c66667c66666600},{0x0053,0x3c66603c06663c00},
{0x0054,0x7e18181818181800},{0x0055,0x6666666666663c00},{0x0056,0x66666666663c1800},{0x0057,0xc6c6c6d6d6fe6c00},
{0x0058,0x66663c183c666600},{0x0059,0x6666663c18181800},{0x005a,0x7e060c1830607e00},{0x005b,0x3c30303030303c00},
{0x005c,0x406030180c060200},{0x005d,0x3c0c0c0c0c0c3c00},{0x005e,0x183c660000000000},{0x005f,0x000000000000ff00},
{0x0060,0x1008000000000000},{0x0061,0x00003c063e663e00},{0x0062,0x60607c6666667c00},{0x0063,0x00003c6660663c00},
{0x0064,0x06063e6666663e00},{0x0065,0x00003c667e603c00},{0x0066,0x3c6660f860606000},{0x0067,0x00003e66663e063c},
{0x0068,0x60607c6666666600},{0x0069,0x1800181818180c00},{0x006a,0x1800381818181870},{0x006b,0x6060666c786c6600},
{0x006c,0x1818181818180c00},{0x006d,0x0000ecfed6d6d600},{0x006e,0x00007c6666666600},{0x006f,0x00003c6666663c00},
{0x0070,0x00007c66667c6060},{0x0071,0x00003e66663e0606},{0x0072,0x00007c6660606000},{0x0073,0x00003c603c063c00},
{0x0074,0x30307c3030301c00},{0x0075,0x0000666666663e00},{0x0076,0x00006666663c1800},{0x0077,0x0000c6c6d6d66c00},
{0x0078,0x0000663c183c6600},{0x0079,0x00006666663e063c},{0x007a,0x00007e0c18307e00},{0x007b,0x0c18183018180c00},
{0x007c,0x1818181818181818},{0x007d,0x3018180c18183000},{0x007e,0x000000003a6e0000},{0x00a0,0x0000000000000000},
{0x00a1,0x0018001818181818},{0x00a2,0x00083e6868683e08},{0x00a3,0x3c6660f86060fe00},{0x00a4,0x00423c66663c4200},
{0x00a5,0x66663c183c181800},{0x00a6,0x1818180000181818},{0x00a7,0x3c607c663e063c00},{0x00a8,0x2400000000000000},
{0x00a9,0x38449aa29a443800},{0x00aa,0x060a060000000000},{0x00ab,0x0000366cd86c3600},{0x00ac,0x0000007e06060000},
{0x00ad,0x0000000000000000},{0x00ae,0x3844bab2aa443800},{0x00af,0x0018000000000000},{0x00b0,0x386c380000000000},
{0x00b1,0x0018187e1818003c},{0x00b2,0x1804081c00000000},{0x00b3,0x18040c1c00000000},{0x00b4,0x0810000000000000},
{0x00b5,0x00006c6c6c786060},{0x00b6,0x7ef4f47434343400},{0x00b7,0x0000000018000000},{0x00b8,0x0000000000000008},
{0x00b9,0x0818080800000000},{0x00ba,0x040a040000000000},{0x00bb,0x0000d86c366cd800},{0x00bc,0x40c0444c541e0400},
{0x00bd,0x40c04c5244081e00},{0x00be,0xe0106216ea0f0200},{0x00bf,0x001800183060663c},{0x00c0,0x1008003c667e6600},
{0x00c1,0x0810003c667e6600},{0x00c2,0x1028003c667e6600},{0x00c3,0x3c00003c667e6600},{0x00c4,0x2400003c667e6600},
{0x00c5,0x1818003c667e6600},{0x00c6,0x7ed8d8fcd8d8de00},{0x00c7,0x3c66606060663c08},{0x00c8,0x10087e6078607e00},
{0x00c9,0x08107e6078607e00},{0x00ca,0x10287e6078607e00},{0x00cb,0x24007e6078607e00},{0x00cc,0x10083c1818183c00},
{0x00cd,0x08103c1818183c00},{0x00ce,0x10283c1818183c00},{0x00cf,0x24003c1818183c00},{0x00d0,0x7c6666f666667c00},
{0x00d1,0x3c0066767e6e6600},{0x00d2,0x10083c6666663c00},{0x00d3,0x08103c6666663c00},{0x00d4,0x10283c6666663c00},
{0x00d5,0x3c66666666663c00},{0x00d6,0x24003c6666663c00},{0x00d7,0x0000663c183c6600},{0x00d8,0x3d666e7e7666bc00},
{0x00d9,0x1008666666663c00},{0x00da,0x0810666666663c00},{0x00db,0x1028666666663c00},{0x00dc,0x2400666666663c00},
{0x00dd,0x081066663c181800},{0x00de,0x303c3636363c3000},{0x00df,0x00007c666c666c60},{0x00e0,0x10083c063e663e00},
{0x00e1,0x04083c063e663e00},{0x00e2,0x10283c063e663e00},{0x00e3,0x3c003c063e663e00},{0x00e4,0x24003c063e663e00},
{0x00e5,0x18183c063e663e00},{0x00e6,0x0000ec327eb07c00},{0x00e7,0x00003c6660663c08},{0x00e8,0x10083c667e603c00},
{0x00e9,0x08103c667e603c00},{0x00ea,0x10283c667e603c00},{0x00eb,0x24003c667e603c00},{0x00ec,0x1008001818180c00},
{0x00ed,0x0810001818180c00},{0x00ee,0x1028001818180c00},{0x00ef,0x2400001818180c00},{0x00f0,0x0c1f063e66663c00},
{0x00f1,0x3c007c6666666600},{0x00f2,0x10083c6666663c00},{0x00f3,0x08103c6666663c00},{0x00f4,0x10283c6666663c00},
{0x00f5,0x3c003c6666663c00},{0x00f6,0x24003c6666663c00},{0x00f7,0x000018007e001800},{0x00f8,0x00003d666e76bc00},
{0x00f9,0x1008666666663e00},{0x00fa,0x0810666666663e00},{0x00fb,0x1028666666663e00},{0x00fc,0x2400666666663e00},
{0x00fd,0x08106666663e063c},{0x00fe,0x0000303c363c3000},{0x00ff,0x24006666663e063c},{0x0131,0x0000181818180c00},
{0x0141,0x606078e060607e00},{0x0142,0x18181c3818180c00},{0x0152,0x7ed8d8dcd8d87e00},{0x0153,0x00006c929e906c00},
{0x0160,0x28103e603c067c00},{0x0161,0x28103c603c063c00},{0x0178,0x240066663c181800},{0x017d,0x28107e0c18307e00},
{0x017e,0x28107e0c18307e00},{0x0192,0x0c183c1818183000},{0x02c6,0x1028000000000000},{0x02c7,0x2810000000000000},
{0x02d8,0x2418000000000000},{0x02d9,0x1818000000000000},{0x02da,0x1818000000000000},{0x02db,0x0000000000000010},
{0x02dc,0x3c00000000000000},{0x02dd,0x1428000000000000},{0x0394,0x10386c6cc6c6fe00},{0x03a3,0xfec6603060c6fe00},
{0x03a9,0x7cc6c6c6c66cee00},{0x03b1,0x000073deccde7300},{0x03b2,0x7cc6c6fcc6c6f8c0},{0x03b3,0x0066663c66663c00},
{0x03b4,0x3c60603c66663c00},{0x03b5,0x00001e307c301e00},{0x03b8,0x386cc6fec66c3800},{0x03bb,0x00c06030386cc600},
{0x03bc,0x00006666667c6060},{0x03c0,0x0000fe6c6c6c6600},{0x03c3,0x00007ecccccc7800},{0x03c6,0x00107cd6d6d67c10},
{0x03c7,0x00e63c1838ec4700},{0x03c8,0x0010d6d6d6d67c10},{0x03c9,0x000066c3dbdb7e00},{0x1e9e,0x7c66666c66666c60},
{0x2013,0x000000007e000000},{0x2014,0x00000000ff000000},{0x2018,0x3030180000000000},{0x2019,0x1818300000000000},
{0x201a,0x0000000000181810},{0x201c,0x6c6c360000000000},{0x201d,0x36366c0000000000},{0x201e,0x0000000000363624},
{0x2020,0x183c181818000000},{0x2021,0x183c183c18000000},{0x2022,0x003c7e7e7e7e3c00},{0x2026,0x000000000000db00},
{0x2030,0x00ccd83060d69a00},{0x2039,0x00000c1830180c00},{0x203a,0x000030180c183000},{0x2044,0x0204081020408000},
{0x20ac,0x3c66f060f0623c00},{0x2122,0x007e2e2a00000000},{0x2190,0x102040fe40201000},{0x2191,0x1038549210101000},
{0x2192,0x100804fe04081000},{0x2193,0x1010109254381000},{0x2194,0x002844fe44280000},{0x2195,0x1038541054381000},
{0x2196,0x007c605048440200},{0x2197,0x003e060a12224000},{0x2198,0x004022120a063e00},{0x2199,0x0002444850607c00},
{0x2202,0x180c061e36361c00},{0x220f,0x7e34343434343434},{0x2211,0x7c6030181830607c},{0x2212,0x000000003c000000},
{0x221a,0x07060c0c18d87000},{0x221e,0x0000006c926c0000},{0x222b,0x0c18181818181830},{0x2248,0x00003a6e003a6e00},
{0x2260,0x0000087c107c2000},{0x2264,0x000c1830180c003c},{0x2265,0x0030180c1830003c},{0x22a3,0x030303ff03030300},
{0x23be,0xffc0c0c0c0c0c0c0},{0x23ca,0x18181818181818ff},{0x23cc,0x03030303030303ff},{0x2500,0x000000ffff000000},
{0x2502,0x1818181818181818},{0x250c,0x0000001f1f181818},{0x2510,0x000000f8f8181818},{0x2514,0x1818181f1f000000},
{0x2518,0x181818f8f8000000},{0x251c,0x1818181f1f181818},{0x2524,0x181818f8f8181818},{0x252c,0x000000ffff181818},
{0x2534,0x181818ffff000000},{0x253c,0x181818ffff181818},{0x256d,0x000000070f1c1818},{0x256e,0x000000e0f0381818},
{0x256f,0x181838f0e0000000},{0x2570,0x18181c0f07000000},{0x2571,0x03070e1c3870e0c0},{0x2572,0xc0e070381c0e0703},
{0x2573,0xc3e77e3c3c7ee7c3},{0x2574,0x000000f8f8000000},{0x2575,0x1818181818000000},{0x2576,0x0000001f1f000000},
{0x2577,0x0000001818181818},{0x2580,0xffffffff00000000},{0x2581,0x00000000000000ff},{0x2582,0x000000000000ffff},
{0x2583,0x0000000000ffffff},{0x2584,0x00000000ffffffff},{0x2588,0xffffffffffffffff},{0x258c,0xf0f0f0f0f0f0f0f0},
{0x258d,0xe0e0e0e0e0e0e0e0},{0x258e,0xc0c0c0c0c0c0c0c0},{0x258f,0x8080808080808080},{0x2590,0x0f0f0f0f0f0f0f0f},
{0x2592,0xcccc3333cccc3333},{0x2594,0xff00000000000000},{0x2595,0x0101010101010101},{0x2596,0x00000000f0f0f0f0},
{0x2597,0x000000000f0f0f0f},{0x2598,0xf0f0f0f000000000},{0x2599,0xf0f0f0f0ffffffff},{0x259a,0xf0f0f0f00f0f0f0f},
{0x259b,0xfffffffff0f0f0f0},{0x259c,0xffffffff0f0f0f0f},{0x259d,0x0f0f0f0f00000000},{0x259e,0x0f0f0f0ff0f0f0f0},
{0x259f,0x0f0f0f0fffffffff},{0x25a0,0x007e7e7e7e7e7e00},{0x25a1,0x007e424242427e00},{0x25ca,0x10386cc66c381000},
{0x25cb,0x3c66c38181c3663c},{0x25cc,0x1440018001800228},{0x25cf,0x3c7effffffff7e3c},{0x25e2,0x0103070f1f3f7fff},
{0x25e3,0x80c0e0f0f8fcfeff},{0x25e4,0xfffefcf8f0e0c080},{0x25e5,0xff7f3f1f0f070301},{0x2639,0x7eff99ffc3bdff7e},
{0x263a,0x7eff99ffbdc3ff7e},{0x263c,0x995a24c3c3245a99},{0x2640,0x3c6666663c187e18},{0x2642,0x0f070d78cccccc78},
{0x2660,0x10387cfefe103800},{0x2663,0x3838fefefe103800},{0x2665,0x6cfefefe7c381000},{0x2666,0x10387cfe7c381000},
{0x2669,0x040404041c3c1800},{0x266a,0x080c0a0838783000},{0x266b,0x3e22222266ee4400},{0x266c,0x3e223e2266ee4400},
{0x266d,0x0020203828300000},{0x266e,0x0020203828380800},{0x266f,0x0000287c287c2800},{0x2713,0x0103066c78706000},
{0x2b60,0x103070ffff703010},{0x2b61,0x183c7eff18181818},{0x2b62,0x080c0effff0e0c08},{0x2b63,0x18181818ff7e3c18},
{0x3041,0x00103c10385c3400},{0x3042,0x107e103c565a3400},{0x3043,0x0000004844442400},{0x3044,0x0044424242522200},
{0x3045,0x0000380078041800},{0x3046,0x3c007c0202043800},{0x3047,0x000038003c083400},{0x3048,0x3c007c0408344600},
{0x3049,0x0020742470a86800},{0x304a,0x20fa2278a4a46800},{0x304b,0x20782a2a4a485000},{0x304c,0x0000107a2a485000},
{0x304d,0x107c107c18201c00},{0x304e,0x4aea40f060807000},{0x304f,0x0408304030080400},{0x3050,0x0a2a408040201000},
{0x3051,0x045e444444440800},{0x3052,0x1595b89090902000},{0x3053,0x7c04082040423c00},{0x3054,0xea2a004080847800},
{0x3055,0x107e083c42403c00},{0x3056,0x4afa207884807800},{0x3057,0x4040404042443800},{0x3058,0x8a8a808084887000},
{0x3059,0x087e081828187000},{0x305a,0x25f52060a060c000},{0x305b,0x00247e242c201c00},{0x305c,0x0555f85050403000},
{0x305d,0x3e0c7e0c10100e00},{0x305e,0xf565f06080807000},{0x305f,0x40f04e4050508e00},{0x3060,0x45e5584050508c00},
{0x3061,0x107e203c02021c00},{0x3062,0x25f5407008083000},{0x3063,0x0000003804041800},{0x3064,0x00007c0202023c00},
{0x3065,0x0a0af00808087000},{0x3066,0x007e0c1020201c00},{0x3067,0x00f8354580807000},{0x3068,0x0020263840403c00},
{0x3069,0x0a4a407880807800},{0x306a,0x40ee40444c568a00},{0x306b,0x005e404050500e00},{0x306c,0x00287caaaa9e6d00},
{0x306d,0x20603c22266a2600},{0x306e,0x00003c5252522400},{0x306f,0x08be88889caa1200},{0x3070,0x15bd9090b8d43400},
{0x3071,0x13bb9090b8d43400},{0x3072,0x00e82c4644443800},{0x3073,0x05d5588c88887000},{0x3074,0x03d3588c88887000},
{0x3075,0x380010544a8a3000},{0x3076,0x6a0a20a894146000},{0x3077,0x760620a894146000},{0x3078,0x000020508c020000},
{0x3079,0x0a0a20508c020000},{0x307a,0x060620508c020000},{0x307b,0xbe88be889caa9200},{0x307c,0xbd95b890b8d43400},
{0x307d,0xbb93b890b8d43400},{0x307e,0x087e087e087c7200},{0x307f,0x0074143e54542400},{0x3080,0x20f42260a0621c00},
{0x3081,0x00487ccaaab26400},{0x3082,0x207c207c20221c00},{0x3083,0x0000287824282000},{0x3084,0x40487cca424c4000},
{0x3085,0x0000485c6a5c4800},{0x3086,0x00485c6a4a5c0800},{0x3087,0x0000101810383400},{0x3088,0x101c101038542200},
{0x3089,0x300c405c62420c00},{0x308a,0x0042424262420c00},{0x308b,0x7c083c62021a3c00},{0x308c,0x20e0382424642600},
{0x308d,0x003c081c22020c00},{0x308e,0x0000207834642800},{0x308f,0x20603c3222622400},{0x3090,0x0078103c52562600},
{0x3091,0x7c08304c0e1c344a},{0x3092,0x107c10384e140e00},{0x3093,0x40405068484a4400},{0x3094,0x6a0ae0101020c000},
{0x3099,0xa0a0000000000000},{0x309a,0xc0c0000000000000},{0x309d,0x00202010080c3000},{0x309e,0x0a2a2010080c3000},
{0x30a1,0x00007c0418102000},{0x30a2,0x00fe021410102000},{0x30a3,0x0000000478101000},{0x30a4,0x0002041868080800},
{0x30a5,0x0000103c24040800},{0x30a6,0x00107e4202041800},{0x30a7,0x0000007810107c00},{0x30a8,0x007c101010107e00},
{0x30a9,0x0000087c18281000},{0x30aa,0x00047e0c14240800},{0x30ab,0x00107e1212224400},{0x30ac,0x0a0a20fc24440800},
{0x30ad,0x107c10fe10101000},{0x30ae,0x0a4af040f0404000},{0x30af,0x203e224204083000},{0x30b0,0x0a4a70509020c000},
{0x30b1,0x10103e4808081000},{0x30b2,0x0a0a407890102000},{0x30b3,0x00007e0202027e00},{0x30b4,0x0a0af0101010f000},
{0x30b5,0x00247e2404040800},{0x30b6,0x0a0a50f850102000},{0x30b7,0x3008601204186000},{0x30b8,0x0a4a20844830c000},
{0x30b9,0x007e020408146200},{0x30ba,0x0a0af0101020d000},{0x30bb,0x00203e6428201e00},{0x30bc,0x0a4a78d040403800},
{0x30bd,0x0042222204087000},{0x30be,0x0a4a202204087000},{0x30bf,0x203c24540c083000},{0x30c0,0x0a4a70d030106000},
{0x30c1,0x003e087e08081000},{0x30c2,0x0afa20f820204000},{0x30c3,0x0010082212041800},{0x30c4,0x2012422204087000},
{0x30c5,0x0a0a249444083000},{0x30c6,0x003c007e08083000},{0x30c7,0x0a0a7020f8204000},{0x30c8,0x002020302c202000},
{0x30c9,0x0a2a20302c202000},{0x30ca,0x08087e0808083000},{0x30cb,0x00003e0000007e00},{0x30cc,0x7e02120a040a7000},
{0x30cd,0x10fc143830589400},{0x30ce,0x0004040408106000},{0x30cf,0x0000242422224200},{0x30d0,0x0a0a505048488800},
{0x30d1,0x0606505048488800},{0x30d2,0x00404c7040403c00},{0x30d3,0x0a8a80f080807800},{0x30d4,0x068680f080807800},
{0x30d5,0x007e020204087000},{0x30d6,0x0a0af0101020c000},{0x30d7,0x0606f0101020c000},{0x30d8,0x0000304884020000},
{0x30d9,0x0a0a304884020000},{0x30da,0x0606304884020000},{0x30db,0x10fe10545492a200},{0x30dc,0x0a2af82070a84000},
{0x30dd,0x0626f82070a84000},{0x30de,0x007e022418080400},{0x30df,0x0078003c003e0000},{0x30e0,0x001010202844fe02},
{0x30e1,0x0004241408146200},{0x30e2,0x007c107e10100c00},{0x30e3,0x0000203c64201000},{0x30e4,0x00207e2224101000},
{0x30e5,0x0000003c04043e00},{0x30e6,0x007c040404047e00},{0x30e7,0x00003c043c043c00},{0x30e8,0x007e027e02027e00},
{0x30e9,0x3c007e0202043800},{0x30ea,0x0042424202041800},{0x30eb,0x004848484a4c8800},{0x30ec,0x00202020222c3000},
{0x30ed,0x007e424242427e00},{0x30ee,0x0000003c24041800},{0x30ef,0x007e424202041800},{0x30f0,0x00047e2424fe0404},
{0x30f1,0x007e02141010fe00},{0x30f2,0x007e023e02043800},{0x30f3,0x0062120204087000},{0x30f4,0x0a4af09010106000},
{0x30f5,0x0000103c14240800},{0x30f6,0x0000203c48081000},{0x30f7,0x0a0af09010106000},{0x30f8,0x0a2af0a0a0f02000},
{0x30f9,0x0a0af0106040f000},{0x30fa,0x0a0af01070106000},{0x30fb,0x0000001818000000},{0x30fc,0x000000007e000000},
{0x30fd,0x0000201008040000},{0xe020,0x0000000000000000},{0xe021,0x1818181818001800},{0xe022,0x3636240000000000},
{0xe023,0x6c6cfe6cfe6c6c00},{0xe024,0x107cd07c167c1000},{0xe025,0x00666c1830664600},{0xe026,0x386c3876dccc7600},
{0xe027,0x1818100000000000},{0xe028,0x0c18303030180c00},{0xe029,0x30180c0c0c183000},{0xe02a,0x00663cff3c660000},
{0xe02b,0x000018187e181800},{0xe02c,0x0000000000181830},{0xe02d,0x000000003c000000},{0xe02e,0x0000000000001800},
{0xe02f,0x02060c1830604000},{0xe030,0x3c666e7666663c00},{0xe031,0x1838181818181800},{0xe032,0x3c66063c60667e00},
{0xe033,0x3c66061c06663c00},{0xe034,0x1c3c6cccfe0c0c00},{0xe035,0x7e66607c06663c00},{0xe036,0x3c66607c66663c00},
{0xe037,0x7e66060c18181800},{0xe038,0x3c66663c66663c00},{0xe039,0x3c66663e06663c00},{0xe03a,0x0000001800180000},
{0xe03b,0x0000001800181830},{0xe03c,0x00000c1830180c00},{0xe03d,0x0000007c007c0000},{0xe03e,0x000030180c183000},
{0xe03f,0x3c66060c18001800},{0xe041,0x183c66667e666600},{0xe042,0x7c66667c66667c00},{0xe043,0x3c66606060663c00},
{0xe044,0x7c66666666667c00},{0xe045,0x7e60607860607e00},{0xe046,0x7e60607860606000},{0xe047,0x3c66606e66663c00},
{0xe048,0x6666667e66666600},{0xe049,0x3c18181818183c00},{0xe04a,0x0e06060606663c00},{0xe04b,0x66666c786c666600},
{0xe04c,0x6060606060607e00},{0xe04d,0xc6eefed6c6c6c600},{0xe04e,0x66767e6e66666600},{0xe04f,0x3c66666666663c00},
{0xe050,0x7c66667c60606000},{0xe051,0x3c666666666e3c06},{0xe052,0x7c66667c66666600},{0xe053,0x3c66603c06663c00},
{0xe054,0x7e18181818181800},{0xe055,0x6666666666663c00},{0xe056,0x66666666663c1800},{0xe057,0xc6c6c6d6d6fe6c00},
{0xe058,0x66663c183c666600},{0xe059,0x6666663c18181800},{0xe05a,0x7e060c1830607e00},{0xe05b,0x3c30303030303c00},
{0xe05c,0x3c6660f86060fe00},{0xe05d,0x3c0c0c0c0c0c3c00},{0xe05e,0x1038549210101000},{0xe05f,0x102040fe40201000},
{0xe060,0x000000ffff000000},{0xe061,0x10387cfefe103800},{0xe062,0x1818181818181818},{0xe063,0x000000ffff000000},
{0xe064,0x0000ffff00000000},{0xe065,0x00ffff0000000000},{0xe066,0x00000000ffff0000},{0xe067,0x3030303030303030},
{0xe068,0x0c0c0c0c0c0c0c0c},{0xe069,0x000000e0f0381818},{0xe06a,0x18181c0f07000000},{0xe06b,0x181838f0e0000000},
{0xe06c,0xc0c0c0c0c0c0ffff},{0xe06d,0xc0e070381c0e0703},{0xe06e,0x03070e1c3870e0c0},{0xe06f,0xffffc0c0c0c0c0c0},
{0xe070,0xffff030303030303},{0xe071,0x003c7e7e7e7e3c00},{0xe072,0x0000000000ffff00},{0xe073,0x6cfefefe7c381000},
{0xe074,0x6060606060606060},{0xe075,0x000000070f1c1818},{0xe076,0xc3e77e3c3c7ee7c3},{0xe077,0x3c66c38181c3663c},
{0xe078,0x3838fefefe103800},{0xe079,0x0606060606060606},{0xe07a,0x10387cfe7c381000},{0xe07b,0x181818ffff181818},
{0xe07c,0xc0c03030c0c03030},{0xe07d,0x1818181818181818},{0xe07e,0x0000fe6c6c6c6600},{0xe07f,0xff7f3f1f0f070301},
{0xe0a1,0xf0f0f0f0f0f0f0f0},{0xe0a2,0x00000000ffffffff},{0xe0a3,0xff00000000000000},{0xe0a4,0x00000000000000ff},
{0xe0a5,0xc0c0c0c0c0c0c0c0},{0xe0a6,0xcccc3333cccc3333},{0xe0a7,0x0303030303030303},{0xe0a8,0x00000000cccc3333},
{0xe0a9,0xfffefcf8f0e0c080},{0xe0aa,0x0303030303030303},{0xe0ab,0x1818181f1f181818},{0xe0ac,0x000000000f0f0f0f},
{0xe0ad,0x1818181f1f000000},{0xe0ae,0x000000f8f8181818},{0xe0af,0x000000000000ffff},{0xe0b0,0x0000001f1f181818},
{0xe0b1,0x181818ffff000000},{0xe0b2,0x000000ffff181818},{0xe0b3,0x181818f8f8181818},{0xe0b4,0xc0c0c0c0c0c0c0c0},
{0xe0b5,0xe0e0e0e0e0e0e0e0},{0xe0b6,0x0707070707070707},{0xe0b7,0xffff000000000000},{0xe0b8,0xffffff0000000000},
{0xe0b9,0x0000000000ffffff},{0xe0ba,0x030303030303ffff},{0xe0bb,0x00000000f0f0f0f0},{0xe0bc,0x0f0f0f0f00000000},
{0xe0bd,0x181818f8f8000000},{0xe0be,0xf0f0f0f000000000},{0xe0bf,0xf0f0f0f00f0f0f0f},{0xe0c1,0x10387cfefe103800},
{0xe0c2,0x1818181818181818},{0xe0c3,0x000000ffff000000},{0xe0c4,0x0000ffff00000000},{0xe0c5,0x00ffff0000000000},
{0xe0c6,0x00000000ffff0000},{0xe0c7,0x3030303030303030},{0xe0c8,0x0c0c0c0c0c0c0c0c},{0xe0c9,0x000000e0f0381818},
{0xe0ca,0x18181c0f07000000},{0xe0cb,0x181838f0e0000000},{0xe0cc,0xc0c0c0c0c0c0ffff},{0xe0cd,0xc0e070381c0e0703},
{0xe0ce,0x03070e1c3870e0c0},{0xe0cf,0xffffc0c0c0c0c0c0},{0xe0d0,0xffff030303030303},{0xe0d1,0x003c7e7e7e7e3c00},
{0xe0d2,0x0000000000ffff00},{0xe0d3,0x6cfefefe7c381000},{0xe0d4,0x6060606060606060},{0xe0d5,0x000000070f1c1818},
{0xe0d6,0xc3e77e3c3c7ee7c3},{0xe0d7,0x3c66c38181c3663c},{0xe0d8,0x3838fefefe103800},{0xe0d9,0x0606060606060606},
{0xe0da,0x10387cfe7c381000},{0xe0db,0x181818ffff181818},{0xe0dc,0xc0c03030c0c03030},{0xe0dd,0x1818181818181818},
{0xe0de,0x0000fe6c6c6c6600},{0xe0df,0xff7f3f1f0f070301},{0xe0e1,0xf0f0f0f0f0f0f0f0},{0xe0e2,0x00000000ffffffff},
{0xe0e3,0xff00000000000000},{0xe0e4,0x00000000000000ff},{0xe0e5,0xc0c0c0c0c0c0c0c0},{0xe0e6,0xcccc3333cccc3333},
{0xe0e7,0x0303030303030303},{0xe0e8,0x00000000cccc3333},{0xe0e9,0xfffefcf8f0e0c080},{0xe0ea,0x0303030303030303},
{0xe0eb,0x1818181f1f181818},{0xe0ec,0x000000000f0f0f0f},{0xe0ed,0x1818181f1f000000},{0xe0ee,0x000000f8f8181818},
{0xe0ef,0x000000000000ffff},{0xe0f0,0x0000001f1f181818},{0xe0f1,0x181818ffff000000},{0xe0f2,0x000000ffff181818},
{0xe0f3,0x181818f8f8181818},{0xe0f4,0xc0c0c0c0c0c0c0c0},{0xe0f5,0xe0e0e0e0e0e0e0e0},{0xe0f6,0x0707070707070707},
{0xe0f7,0xffff000000000000},{0xe0f8,0xffffff0000000000},{0xe0f9,0x0000000000ffffff},{0xe0fa,0x030303030303ffff},
{0xe0fb,0x00000000f0f0f0f0},{0xe0fc,0x0f0f0f0f00000000},{0xe0fd,0x181818f8f8000000},{0xe0fe,0xf0f0f0f000000000},
{0xe0ff,0x0000fe6c6c6c6600},{0xe17e,0xcccc3333cccc3333},{0xe17f,0x3399cc663399cc66},{0xe1a9,0xcc993366cc993366},
{0xe1ba,0x0103066c78706000},{0xe1de,0xcccc3333cccc3333},{0xe1df,0x3399cc663399cc66},{0xe1e9,0xcc993366cc993366},
{0xe1fa,0x0103066c78706000},{0xe1ff,0xcccc3333cccc3333},{0xefef,0x1038383838387cd6},{0xeffc,0x003c183c3c3c1800},
{0xeffd,0x3cffff180c183018},{0xefff,0xfff7ebddbb978fff},{0xf000,0x384cc6c6c6643800},{0xf001,0x1838181818187e00},
{0xf002,0x7cc60e3c78e0fe00},{0xf003,0x7e0c183c06c67c00},{0xf004,0x0c1c3c6cccfe0c00},{0xf005,0xfcc0fc0606c67c00},
{0xf006,0x3c60c0fcc6c67c00},{0xf007,0xfec60c1830303000},{0xf008,0x78c4e4789e867c00},{0xf009,0x7cc6c67e060c7800},
{0xf00a,0xfe82fafafafafe00},{0xf00b,0x0060f4fefe7c0000},{0xf00c,0x000205f8001028c7},{0xf00d,0x420d20d0020d2058},
{0xf00e,0x801200440011400a},{0xf00f,0x183c3a5c3e7a5c3c},{0xf010,0x3030303038580000},{0xf011,0x007e85ffb585ff00},
{0xf012,0x003c1824427e3c00},{0xf013,0x20444a2104825224},{0xf014,0xa5e0a110109702a2},{0xf015,0x3c222e7e7e7e4c6e},
{0xf016,0x3c343e1c383c3c37},{0xf017,0x00000c1ca8d060b0},{0xf018,0xc0a09090fc90a0c0},{0xf019,0x0008201a18244080},
{0xf01a,0x3c243e3e76764466},{0xf01b,0x3c347e7c787c3c37},{0xf01c,0x00387ce6faffff7e},{0xf01d,0x000c5cb63362c381},
{0xf01e,0x00f900cf003700de},{0xf01f,0x08041c6c391f3efc},{0xf020,0x3c543c3e361332c4},{0xf021,0x18141418ff81433d},
{0xf022,0x060f0e7efefeaaaa},{0xf023,0x183c745c3c183cfe},{0xf024,0x7c547c7c6c6e22ee},{0xf025,0xf0f878381c0e0603},
{0xf026,0x000000c07ec00000},{0xf027,0x0a040a10183c3c18},{0xf028,0x081c24445a7fffff},{0xf029,0x400c1824224a5a3c},
{0xf02a,0x00386cd6d6d66c38},{0xf02b,0x0000782ccf780000},{0xf02c,0x103058fcff1f0f0f},{0xf02d,0x7c3e7fffe7e3f1f8},
{0xf02e,0x0f0f0f1e1c387000},{0xf02f,0xfcfeff7f3b197102},{0xf030,0x103038107c383828},{0xf031,0x0000603038383c7e},
{0xf032,0x0000000042667e3c},{0xf033,0x00000000005a3c24},{0xf034,0xaaff89ffa1ff89ff},{0xf035,0x3c7edbdbdbdbdbff},
{0xf036,0x55ff91ff85ff91ff},{0xf037,0x183c7e343c3c2c3c},{0xf038,0x00071f327fff3900},{0xf039,0x00e0f84cfeff9c00},
{0xf03a,0x1c3e6bd3e9537e2c},{0xf03b,0x18183c3ca5e7ff99},{0xf03c,0x226a576f3a1a1000},{0xf03d,0x000018bd7edbffa5},
{0xf03e,0x003c7e99ff3c5aa5},{0xf03f,0x3c7eff99db7edba5},{0xf040,0x243c3c18183c3c18},{0xf041,0x995a00c3c3005a99},
{0xf042,0x00007e813c421800},{0xf043,0x387cfefefe7c3800},{0xf044,0x387cfee0fe7c3800},{0xf045,0x387cf0e0f07c3800},
{0xf046,0x387c92b6fefeaa00},{0xf047,0x387c92fec6feaa00},{0xf048,0x0042240000244200},{0xf049,0x0000240000240000},
{0xf04a,0x0000001818000000},{0xf04b,0x00185a5a185a5a00},{0xf04c,0x142e5cba74281000},{0xf04d,0x006c007e7e006c00},
{0xf04e,0x102874ba5c2e1400},{0xf04f,0x005a5a185a5a1800},{0xf050,0x10285cba74e85000},{0xf051,0x0036007e7e003600},
{0xf052,0x50e874ba5c281000},{0xf053,0x002838d77e3c0800},{0xf054,0x006c928244281000},{0xf055,0x006c9e8e4c281000},
{0xf056,0x006cfefe7c381000},{0xf057,0x00387cfeba926c54},{0xfb01,0x3c6660fc6c6c6600},{0xfb02,0x3c6666f666666600},
{0,0}
};

#define theFont bescii_bit // CC1.0
enum { theFontW = 8, theFontH = 8, theFontPaddingW = 0, theFontPaddingH = -1 };

const char *extract_utf32(const char *s, unsigned *out) {
    /**/ if( (s[0] & 0x80) == 0x00 ) return *out = (s[0]), s + 1;
    else if( (s[0] & 0xe0) == 0xc0 ) return *out = (s[0] & 31) <<  6 | (s[1] & 63), s + 2;
    else if( (s[0] & 0xf0) == 0xe0 ) return *out = (s[0] & 15) << 12 | (s[1] & 63) <<  6 | (s[2] & 63), s + 3;
    else if( (s[0] & 0xf8) == 0xf0 ) return *out = (s[0] &  7) << 18 | (s[1] & 63) << 12 | (s[2] & 63) << 6 | (s[3] & 63), s + 4;
    return *out = 0, s + 0;
}
const char* codepoint_to_utf8(unsigned c) { //< @r-lyeh
    static char s[4+1];
    memset(s, 0, 5);
    /**/ if (c <     0x80) s[0] = c, s[1] = 0;
    else if (c <    0x800) s[0] = 0xC0 | ((c >>  6) & 0x1F), s[1] = 0x80 | ( c        & 0x3F), s[2] = 0;
    else if (c <  0x10000) s[0] = 0xE0 | ((c >> 12) & 0x0F), s[1] = 0x80 | ((c >>  6) & 0x3F), s[2] = 0x80 | ( c        & 0x3F), s[3] = 0;
    else if (c < 0x110000) s[0] = 0xF0 | ((c >> 18) & 0x07), s[1] = 0x80 | ((c >> 12) & 0x3F), s[2] = 0x80 | ((c >>  6) & 0x3F), s[3] = 0x80 | (c & 0x3F), s[4] = 0;
    return s;
}

int ui_print_glyph8x8(Tigr *ui, int ui_x, int ui_y, const rgba *colors, uint64_t bits) {
    // early clips
    if((ui_y+theFontH) < 0 || ui_y >= _240) return 0;
    if((ui_x+theFontW) < 0 || ui_x >= _320) return 0;
    // clip vertical
    int y = 0, h = theFontH;
    if( (ui_y+h) >= _240 ) h -= (ui_y+h)-_239;
    else if( ui_y < 0 ) y = -ui_y, ui_y = 0;
    // clip horizontal
    int x = 0, w = theFontW;
    {
        int clipr = 0, clipl = 0;
        if( (ui_x+w) >= _320 ) clipr = (ui_x+w)-_319, clipl = clipr;
        else if( ui_x < 0 ) clipl = -ui_x, ui_x = 0;

        if( clipl || clipr ) {
            uint8_t b0 = bits >>  0; b0 >>= clipr; b0 <<= clipl;
            uint8_t b1 = bits >>  8; b1 >>= clipr; b1 <<= clipl;
            uint8_t b2 = bits >> 16; b2 >>= clipr; b2 <<= clipl;
            uint8_t b3 = bits >> 24; b3 >>= clipr; b3 <<= clipl;
            uint8_t b4 = bits >> 32; b4 >>= clipr; b4 <<= clipl;
            uint8_t b5 = bits >> 40; b5 >>= clipr; b5 <<= clipl;
            uint8_t b6 = bits >> 48; b6 >>= clipr; b6 <<= clipl;
            uint8_t b7 = bits >> 56; b7 >>= clipr; b7 <<= clipl;
            bits = 0
            | ((uint64_t)b0) <<  0ULL
            | ((uint64_t)b1) <<  8ULL
            | ((uint64_t)b2) << 16ULL
            | ((uint64_t)b3) << 24ULL
            | ((uint64_t)b4) << 32ULL
            | ((uint64_t)b5) << 40ULL
            | ((uint64_t)b6) << 48ULL
            | ((uint64_t)b7) << 56ULL;
        }
    }

    rgba *texture = &((rgba*)ui->pix)[ui_x + ui_y * _320];

    for( ; y < h; ++y, texture += _320 ) {
        unsigned y64 = (7 - y) * 8; // will loop 56,48,40,32,24,16,8,0 
        if(bits & (0x80ULL << y64)) texture[_320+1+0] = colors[0], texture[0] = colors[1];
        if(bits & (0x40ULL << y64)) texture[_320+1+1] = colors[0], texture[1] = colors[1];
        if(bits & (0x20ULL << y64)) texture[_320+1+2] = colors[0], texture[2] = colors[1];
        if(bits & (0x10ULL << y64)) texture[_320+1+3] = colors[0], texture[3] = colors[1];
        if(bits & (0x08ULL << y64)) texture[_320+1+4] = colors[0], texture[4] = colors[1];
        if(bits & (0x04ULL << y64)) texture[_320+1+5] = colors[0], texture[5] = colors[1];
        if(bits & (0x02ULL << y64)) texture[_320+1+6] = colors[0], texture[6] = colors[1];
        if(bits & (0x01ULL << y64)) texture[_320+1+7] = colors[0], texture[7] = colors[1];
    }
    return 0;
}

int ui_print_glyph(Tigr *ui, int ui_x, int ui_y, const rgba *colors, unsigned glyph) {
    for( int i = 0; glyph >= theFont[i][0]; ++i ) {
        if( glyph == theFont[i][0] ) {
            return ui_print_glyph8x8(ui, ui_x, ui_y, colors, theFont[i][1]);
        }
    }
    return 0;
}

int ui_print(Tigr *ui, int ui_x, int ui_y, const rgba *colors, const char *utf8) {
    unsigned xchr = 0, ychr = 1, xmax = 0, xbak = ui_x;
    unsigned glyph;
    while( *utf8 ) {
        int cr = *utf8 == '\r';
        int lf = *utf8 == '\n';

        xchr += !cr && !lf;
        ychr += lf;
        xmax = max(xchr, xmax);

        utf8 = extract_utf32(utf8, &glyph);

        if( !lf && !cr ) {
            ui_print_glyph(ui, ui_x, ui_y, colors, glyph);
            ui_x += theFontW + theFontPaddingW;
        } else {
            if( cr ) ui_x = xbak, xchr = 0;
            if( lf ) ui_y += lf * (theFontH + theFontPaddingH);
        }
    }
    return ((theFontH + theFontPaddingH) * ychr) << 16 | ((theFontW + theFontPaddingW) * xmax);
}

#define ui_print(u,x,y,col,...) ui_print(u,x,y,col,va(__VA_ARGS__))

// -----------------

const TPixel ui_00 = {0,0,0,255}, ui_ff = {255,255,255,255};
const rgba ui_colors[] = { 0xff000000, 0xffffffff }; // ui_00 and ui_ff

int ui_x, ui_y; // ui text cursor
int ui_mx, ui_my, ui_lmb, ui_rmb, ui_click; // ui mouse

void ui_frame() {
    int ui_mb;
    extern Tigr *app;
    tigrMouse(app, &ui_mx, &ui_my, &ui_mb);

#if 1 // adjust mouse coords to tube effect distortion if shader is applied
    extern int ZX_CRT;
    if( ZX_CRT ) {
        const float CURVATURE = 8.2f; // must match value in fxShader
        float u = (ui_mx * 1.f / _320) - 0.5f; // [-1..1]
        float v = (ui_my * 1.f / _240) - 0.5f; // [-1..1]
        float offx = v / CURVATURE; // v is intentional
        float offy = u / CURVATURE; // u is intentional
        u += (u * offx * offx); 
        u *= 2; //u = u * 0.5 + 0.5;
        v += (v * offy * offy); 
        v *= 2; //v = v * 0.5 + 0.5;

        u = (u+1) * 0.5f;
        v = (v+1) * 0.5f;

        ui_mx = _320 * u;
        ui_my = _240 * v;

        // debug
        // extern window* ui;
        // tigrFill(ui, ui_mx - 4, ui_my - 4, 4*2, 4*2, ui_00);
    }
#endif

    ui_lmb = ui_mb & 1;
    ui_rmb = !!(ui_mb & 4);

    static int mb_prev = 0;
    ui_click = (ui_mb & 1) > (mb_prev & 1);
    mb_prev = ui_mb;
}

void ui_at(int x, int y) {
    ui_x = x;
    ui_y = y;
}

int ui_button(Tigr *ui, const char *text) {
//  tigrPrint(ui, tfont, ui_x, ui_y, "%s", text);
//  int w = tigrTextWidth(tfont, text);
//  int h = tigrTextHeight(tfont, text);

    int dims = ui_print(ui, ui_x, ui_y, ui_colors, "%s", text);
    int w = dims & 0xFFFF;
    int h = dims >> 16;

    // debug:
    // printf("(text `%s`) (%dx%d)\n", text, w, h);
    // tigrLine(ui, ui_x,ui_y, ui_x,ui_y+h, ui_ff);
    // tigrLine(ui, ui_x,ui_y+h, ui_x+w,ui_y+h, ui_ff);

    {
        int hover = ui_mx >= ui_x && ui_mx < (ui_x+w) && ui_my >= ui_y && ui_my < (ui_y+h);

        if( hover ) {
            // underline
            int lx = ui_x, lw = w, ly = ui_y+h + 2, lh = 1;
            tigrLine(ui, lx+1, ly+1, lx+lw+1, ly+1, ui_00);
            tigrLine(ui, lx,   ly,   lx+lw,   ly,   ui_ff);

            // cursor hand
            extern window *app;
            tigrMouseCursor(app, 1);
        }

        ui_x += h > 0 ? ui_x : w;
        ui_y += h;

        if( hover ) {
            return 1;
        }
    }

    return 0;
}
